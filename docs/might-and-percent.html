<!DOCTYPE html>
<html lang="ru">
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<base target="_top" />
<title>Проценты и Пантеон мощи</title>
<style>
.might-table input {
  width: 150px;
}

.might-table input:invalid {
  border: 2px solid red;
}

.footnote {
  font-size: 0.85em;
}
</style>

</head>
<body>

<table class="might-table">
<tr>
  <th>Уровень</th>
  <td><input type="number" id="level" value="100" min="1" /></td>
</tr>
<tr>
  <th>Опыт уровня</th>
  <td><input type="number" id="might" value="3087108" min="0" /></td>
</tr>
<tr>
  <th>Процент уровня</th>
  <td><input type="number" id="percent" value="50.000" min="0" max="100" step="0.001" /></td>
</tr>
</table>
<p class="footnote">Сохранённая локально работает офлайн</p>

<script>
(function() {
"use strict";

var getMaxExp = function(level) {
  return Math.ceil(Math.pow(1.05, level - 1) * 49299.352);
};

var levelInput = document.getElementById("level");
var mightInput = document.getElementById("might");
var percentInput = document.getElementById("percent");

var onLevelOrExpChange = function() {
  var level = levelInput.valueAsNumber || 0;
  var exp = mightInput.valueAsNumber || 0;
  percentInput.value = (exp * 100 / getMaxExp(level)).toFixed(3);
};

var onPercentChange = function() {
  var level = levelInput.valueAsNumber || 0;
  var percent = percentInput.valueAsNumber || 0;
  mightInput.value = Math.ceil(percent * .01 * getMaxExp(level));
};

levelInput.addEventListener("input", onLevelOrExpChange);
mightInput.addEventListener("input", onLevelOrExpChange);
percentInput.addEventListener("input", onPercentChange);

})();
</script>

</body>
</html>
